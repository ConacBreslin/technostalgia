{% extends "base.html" %}

{% block content %}

<div class="row">
  <div class="col s12">
    <h4 class="center-align">You can filter your search by keyword or category</h4>
  </div>
</div>

<!-- Code for search box  -->
<div class="row card-panel">
  <form action="{{ url_for('search') }}" method="post" class="col s12">
    <div class="row valign-wrapper center-align">
      <div class="input-field col s12">
        <i class="material-icons prefix">search</i>
        <input type="text" name="query" id="query" minlength="3" class="validate" >
        <label for="query">Search by keyword</label>
      </div>
    </div>
    
    
      <div class="row">
        <div class="col s12 m8">
          <h5>or</h5>
    </div>
    </div>
<div class="row">
  <div class="col s12 m8">

    <!-- Code from Materialize.com for dropdown to select category to browse -->
    <select id="category_search" name="category_search" class="validate">
      <option value="" disabled selected>Choose a category to browse</option>
      <option value="all">View all</option>
      {% for category in categories %}
      <option value="{{ category.category_name }}">{{ category.category_name }}</option>
      {% endfor %}
    </select>
  </div>
</div>


    <div class="row">

      <!-- Search and reset buttons  -->
      <div class="col s12 center-align">

        <button type="submit" class="btn-small purple lighten-1"><i class="material-icons right">search</i>
          Search
        </button>
        <a href="{{ url_for('get_technologies') }}" class="btn-small purple lighten-1"><i class="material-icons right">autorenew</i>Reset</a>
      </div>
    </div>
  </form>
</div>


<!-- Code from Materialize.com for cards -->
{% for technology in technologies %}

<div class="col s12 m7">
  <div class="card horizontal medium hoverable">
    <div class="card-image">
      <img src="{{ technology.technology_image }}" alt="">
    </div>
    <div class="card-stacked">
      <div class="card-content">
        <ul>
          <li><strong>Category: {{ technology.category_name }}</strong></li>
          <li>Name: {{ technology.technology_name }}</li>
          <li>Description: {{ technology.technology_description }}</li>
          <li>Best bits: {{ technology.best_bits }}</li>
          <li>Worst bits: {{ technology.worst_bits }}</li>
          <li>Added by: {{ technology.added_by }}</li>
          <li>Date added: {{ technology.added_on }}</li>
                  
        </ul>
      </div>
      <div class="card-action">
        
        <a href="{{ url_for('comments', technology_id=technology._id) }}" class="purple-text text-darken-4">Add or read the comments about the {{ technology.technology_name}}</a>
        
        
      </div>

    </div>
  </div>
</div>

{% endfor %}


{% endblock  %}